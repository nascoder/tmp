name: enc
on: 
  push:
    branches: master
    paths: 
      - '*.txt'

jobs:
  test:
    name: ENC
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: enc
        run: |
          echo ${{ github.actor }}
          REMOTE=https://${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}
          R=https://${{ github.actor }}:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}
          git config user.email "${{ github.actor }}@users.noreply.github.com"
          git config user.name "${{ github.actor }}"
          
          git pull ${REMOTE}
          git checkout master
          
          echo "hi" > auth
          openssl enc -aes-256-cbc -salt -in auth -out auth.enc -k ${{ secrets.GITHUB_TOKEN }}

          git status
          git add auth.enc
          git commit -m "add auth file"
          git push ${R} master
          
